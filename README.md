# 宝可梦睡眠食谱查询工具

这是一个专为宝可梦睡眠游戏设计的食谱查询与食材管理工具，帮助玩家更方便地查看和管理游戏中的食谱和食材库存。

## 功能特性

### 食谱查询
- 按分类筛选食谱（使用下拉菜单选择不同类别的食谱）
- 关键词搜索食谱（在搜索框中输入关键词进行模糊搜索）
- 查看食谱详情及所需食材
- 标记食谱已做/未做状态（右键点击状态列）
- 一键检查食材是否充足（食材充足的食谱会以绿色显示）

### 食材管理
- 查看所有食材的当前库存
- 双击食材数量直接编辑库存

## 技术栈
- Python 3.x
- Tkinter（GUI界面）
- PyMySQL（数据库连接）
- MySQL（数据存储）

## 数据库结构

### 主要表结构
1. **recipes** - 存储食谱信息
   - id: 食谱ID
   - name: 食谱名称
   - category_id: 分类ID
   - calories: 卡路里
   - is_made: 状态（1-已做，2-未做）
   - sort: 排序权重

2. **ingredients** - 存储食材信息
   - id: 食材ID
   - name: 食材名称
   - quantity: 库存数量
   - sort: 排序权重

3. **recipe_ingredients** - 存储食谱与食材的关系
   - recipe_id: 食谱ID
   - ingredient_id: 食材ID
   - quantity_required: 所需数量

4. **dict** - 存储分类等字典数据
   - id: 字典ID
   - type_name: 类型名称
   - parent_id: 父ID
   - sort_order: 排序顺序

## 安装说明

### 前提条件
1. 安装Python 3.x
2. 安装MySQL数据库
3. 创建名为`pokemonsleep`的数据库和相关表

### 安装依赖
```bash
pip install pymysql
```

### 数据库配置
1. 在MySQL中创建数据库：`CREATE DATABASE pokemonsleep CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;`
2. 导入相关表结构和数据（需要自行准备或从游戏中导出）
3. 修改代码中的数据库连接信息（如果与默认配置不同）

```python
# 找到并修改以下代码段中的数据库连接参数
self.conn = pymysql.connect(
    host='localhost',
    port=3306,
    user='root',
    password='root',
    database='pokemonsleep',
    charset='utf8mb4',
    cursorclass=pymysql.cursors.DictCursor
)
```

## 使用方法

### 启动程序
```bash
python recipe_app.py
```

### 食谱查询
1. 在主界面的搜索框中输入关键词进行搜索
2. 从下拉菜单中选择分类进行筛选
3. 点击左侧食谱列表中的任意食谱，右侧会显示该食谱所需的食材
4. 右键点击食谱状态列，可以标记食谱为已做或未做
5. 点击"检查食材充足"按钮，系统会自动检查并标记食材充足的食谱

### 食材管理
1. 切换到"食材管理"标签页
2. 双击任意食材的数量列，可以直接编辑库存数量
3. 点击列标题可以对食材进行排序

## 常见问题

### 数据库连接失败
- 检查MySQL服务是否启动
- 确认数据库名称、用户名和密码是否正确
- 检查防火墙设置是否允许连接

### 食材数量无法编辑
- 确保双击的是数量列
- 输入的数量必须是有效的数字（0-1000之间）

## 注意事项
- 本工具需要连接到本地MySQL数据库，请确保数据库服务正常运行
- 程序中的数据库用户名和密码为默认值，建议在生产环境中修改为更安全的凭据
- 食材状态标记功能依赖于数据库中的is_made字段

## 更新日志

### v2.0
- 新增食材充足检查功能
- 优化食谱查询界面
- 增加右键菜单标记食谱状态
- 改进食材管理功能

## 开发者信息

此工具仅用于宝可梦睡眠游戏辅助，非官方应用。

© 2024 宝可梦睡眠食谱查询工具